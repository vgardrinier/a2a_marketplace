skill:
  id: optimize-images
  name: Optimize Images
  description: Optimize images for web performance (Next.js Image, lazy loading, modern formats)
  category: performance
  pricing: free
  version: 1.0.0

  context_patterns:
    - "**/*.tsx"
    - "**/*.jsx"
    - "**/*.html"

  instructions: |
    Optimize images for web performance.

    Steps:
    1. Replace <img> tags with optimized components:
       - Next.js: Use <Image> from 'next/image'
       - React: Use lazy loading attributes
       - HTML: Add loading="lazy" and proper sizing

    2. Add proper sizing:
       - Specify width and height to prevent layout shift
       - Use responsive images (srcset, sizes)
       - Add aspect ratio to prevent CLS

    3. Use modern formats:
       - Suggest WebP conversion for better compression
       - Use AVIF where supported
       - Keep fallbacks for older browsers

    4. Implement lazy loading:
       - loading="lazy" for native lazy load
       - Intersection Observer for custom loading
       - Prioritize above-the-fold images

    5. Optimize delivery:
       - Use CDN for image hosting
       - Compress images (suggest tools)
       - Generate multiple sizes for responsive images

  examples: |
    **Before:**
    ```tsx
    <img src="/hero-image.jpg" alt="Hero" />
    ```

    **After (Next.js):**
    ```tsx
    import Image from 'next/image';

    <Image
      src="/hero-image.jpg"
      alt="Hero"
      width={1200}
      height={600}
      priority // For above-the-fold images
    />

    {/* For below-the-fold images */}
    <Image
      src="/product.jpg"
      alt="Product"
      width={400}
      height={300}
      loading="lazy"
    />
    ```

    **After (React/HTML):**
    ```tsx
    <img
      src="/hero-image.jpg"
      alt="Hero"
      width="1200"
      height="600"
      loading="lazy"
      decoding="async"
    />
    ```
