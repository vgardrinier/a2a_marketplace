skill:
  id: add-loading-states
  name: Add Loading States
  description: Add proper loading states to async operations in React components
  category: react
  pricing: free
  version: 1.0.0

  context_patterns:
    - "**/*.tsx"
    - "**/*.jsx"

  instructions: |
    Add proper loading states to async operations in React components.

    Steps:
    1. Find async operations:
       - API calls (fetch, axios)
       - Data fetching hooks (useEffect with async)
       - Form submissions
       - File uploads

    2. Add loading state:
       - const [isLoading, setIsLoading] = useState(false)
       - Set to true before async operation
       - Set to false in finally block

    3. Add UI feedback:
       - Show spinner/skeleton during loading
       - Disable buttons during submission
       - Show "Loading..." text
       - Use proper loading components (Spinner, Skeleton)

    4. Handle errors:
       - Add error state alongside loading
       - Show error messages to user
       - Add retry functionality if appropriate

    5. Best practices:
       - Never leave users without feedback
       - Disable interactive elements while loading
       - Show progress for long operations
       - Use optimistic UI when appropriate

  examples: |
    **Before:**
    ```tsx
    function UserProfile({ userId }: { userId: string }) {
      const [user, setUser] = useState(null);

      useEffect(() => {
        fetch(`/api/users/${userId}`)
          .then(res => res.json())
          .then(setUser);
      }, [userId]);

      return <div>{user?.name}</div>;
    }
    ```

    **After:**
    ```tsx
    function UserProfile({ userId }: { userId: string }) {
      const [user, setUser] = useState(null);
      const [isLoading, setIsLoading] = useState(false);
      const [error, setError] = useState<string | null>(null);

      useEffect(() => {
        setIsLoading(true);
        setError(null);

        fetch(`/api/users/${userId}`)
          .then(res => res.json())
          .then(setUser)
          .catch(err => setError(err.message))
          .finally(() => setIsLoading(false));
      }, [userId]);

      if (isLoading) return <Spinner />;
      if (error) return <ErrorMessage message={error} />;
      if (!user) return null;

      return <div>{user.name}</div>;
    }
    ```
